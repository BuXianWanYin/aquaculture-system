# 水产养殖管理系统 - 项目功能文档

## 项目概述

水产养殖管理系统是一个面向水产养殖企业的数字化管理平台，旨在实现养殖计划、产量统计、数据分析等核心业务的全面数字化管理，提升管理效率和数据准确性。

---

## （一）主要功能模块

### 1. 用户与权限管理模块

本模块为系统安全运行提供基础保障，实现用户身份认证与权限精细化控制。

#### （1）数据表设计

**用户信息表（sys_user）**
- 用户ID（主键）
- 账号（唯一）
- 加密密码
- 角色ID（外键关联角色表）
- 状态（启用/禁用）
- 所属养殖场
- 联系方式
- 家庭地址
- 头像路径
- 创建时间
- 更新时间

**角色表（sys_role）**
- 角色ID（主键）
- 角色名称（如：部门管理员、普通操作员、决策层）
- 权限描述
- 创建时间
- 更新时间

**权限表（sys_permission）**
- 权限ID（主键）
- 权限标识（唯一）
- 权限名称
- 所属模块
- 创建时间

#### （2）核心功能

**用户管理**
- 支持管理员、普通操作员、决策层等不同角色的注册与登录
- 用户账号管理（新增、编辑、删除、启用/禁用）
- 用户信息查询与筛选

**权限控制**
- 角色权限配置：为不同角色分配相应权限
- 管理员：拥有全系统操作权限，可管理所有部门数据
- 普通操作员：仅能管理本部门或该区域数据，可录入和查看本部门计划、产量等
- 决策层：仅具备数据查看权限，可查看各类报表和统计数据，无修改权限
- 基于角色的访问控制（RBAC），实现细粒度权限管理

**个人信息管理**
- 修改基本资料：所属养殖场、联系方式、家庭地址等
- 密码修改：支持用户自主修改登录密码
- 密码重置：管理员可为用户重置密码
- 个人头像上传：支持上传和更换个人头像

---

### 2. 基础数据管理模块

本模块维护系统核心基础数据，为养殖计划与产量统计提供数据支撑。

#### （1）数据表设计

**养殖品种表（base_breed）**
- 品种ID（主键）
- 品种名称
- 品类（鱼类、甲壳类等）
- 生长周期（天）
- 单位（公斤、吨等）
- 适宜水温范围
- 其他属性
- 创建时间
- 更新时间

**养殖区域表（base_area）**
- 区域ID（主键）
- 区域编号（唯一）
- 区域名称
- 面积（平方米）
- 所属部门ID（外键）
- 位置信息
- 水质类型
- 状态（在用/闲置）
- 负责人ID（外键关联用户表）
- 创建时间
- 更新时间

**设备信息表（base_equipment）**
- 设备ID（主键）
- 设备名称
- 设备型号
- 设备类型（增氧机、投饵机等）
- 区域ID（外键关联养殖区域表）
- 安装位置
- 数量
- 维护时间
- 维护记录
- 状态（正常/故障/维修中）
- 创建时间
- 更新时间

#### （2）核心功能

**养殖品种管理**
- 支持鱼类、甲壳类等品类划分
- 记录品种名称、生长周期、适宜水温等属性
- 品种信息的新增、编辑、删除、查询
- 支持按品类筛选和搜索

**养殖区域管理**
- 录入养殖场或池塘基本信息：编号、名称、面积、位置、水质类型
- 标记使用状态（在用/闲置）
- 关联负责人
- 区域信息的新增、编辑、删除、查询
- 支持按部门、状态筛选

**设备资源管理**
- 记录增氧机、投饵机等养殖设备的型号、数量、安装位置
- 维护记录管理：记录维护时间、维护内容、维护人员
- 设备状态管理：正常、故障、维修中等状态标记
- 设备信息的新增、编辑、删除、查询
- 支持按区域、设备类型筛选

---

### 3. 养殖计划管理模块（核心模块）

本模块实现养殖计划全流程数字化管理，确保计划可执行、可追溯。

#### （1）数据表设计

**养殖计划表（aquaculture_plan）**
- 计划ID（主键）
- 计划名称
- 区域ID（外键关联养殖区域表）
- 品种ID（外键关联养殖品种表）
- 目标产量（公斤/吨）
- 投放量
- 养殖周期（天）
- 开始日期
- 预计结束日期
- 饲料预算
- 防疫计划
- 状态（待审批/已通过/已驳回/执行中/已完成/已取消）
- 创建人ID（外键关联用户表）
- 审批人ID（外键关联用户表）
- 审批意见
- 审批时间
- 创建时间
- 更新时间

**计划调整表（plan_adjust）**
- 调整ID（主键）
- 原计划ID（外键关联养殖计划表）
- 调整原因
- 原参数（JSON格式存储原计划参数）
- 新参数（JSON格式存储调整后参数）
- 调整类型（延长周期/修改目标产量/其他）
- 审批状态（待审批/已通过/已驳回）
- 审批人ID（外键关联用户表）
- 审批意见
- 审批时间
- 创建人ID（外键关联用户表）
- 创建时间
- 更新时间

#### （2）核心功能

**计划录入**
- 普通操作员按区域或品种创建计划
- 填写计划基本信息：计划名称、区域、品种
- 填写计划参数：投放量、目标产量、养殖周期、开始日期
- 填写预算信息：饲料预算、防疫计划
- 计划保存为"待审批"状态

**计划审批**
- 部门管理员审核计划合理性
- 审核内容：投放量与区域面积匹配度、目标产量合理性、周期安排等
- 支持"通过"或"驳回"操作
- 审批通过后计划状态变更为"已通过"，可开始执行
- 驳回需填写驳回原因，计划状态变更为"已驳回"
- 记录审批人、审批时间、审批意见

**计划调整**
- 允许因天气、病害等原因提交调整申请
- 调整类型：延长周期、修改目标产量、修改投放量等
- 填写调整原因和新参数
- 调整申请提交后状态为"待审批"
- 经部门管理员二次审批后更新原计划
- 审批通过后，原计划参数更新，状态保持"执行中"
- 记录调整历史，支持追溯

---

### 4. 产量统计管理模块（核心模块）

本模块实现产量数据的精准采集、审核与关联分析，为收益核算提供依据。

#### （1）数据表设计

**产量统计表（yield_statistics）**
- 产量ID（主键）
- 计划ID（外键关联养殖计划表）
- 区域ID（外键关联养殖区域表）
- 品种ID（外键关联养殖品种表）
- 实际产量（公斤/吨）
- 规格
- 统计日期
- 捕捞时间
- 负责人ID（外键关联用户表）
- 状态（待审核/已通过/已驳回）
- 审核人ID（外键关联用户表）
- 审核意见
- 审核时间
- 创建人ID（外键关联用户表）
- 创建时间
- 更新时间

**产量凭证表（yield_evidence）**
- 凭证ID（主键）
- 产量ID（外键关联产量统计表）
- 照片路径
- 文件类型
- 文件大小
- 上传时间
- 上传人ID（外键关联用户表）

#### （2）核心功能

**产量录入**
- 操作员按日、周、月记录实际捕捞量
- 关联对应养殖计划
- 记录品种、重量、规格、捕捞时间、负责人等信息
- 支持上传产量凭证照片（多张）
- 产量记录保存为"待审核"状态

**数据审核**
- 管理员核对产量数据
- 审核内容：产量数据合理性、与计划匹配度、凭证完整性等
- 支持"通过"或"驳回"操作
- 审核通过后计入统计库，状态变更为"已通过"
- 驳回需注明原因，状态变更为"已驳回"，操作员可修改后重新提交

**计划完成率分析**
- 自动计算"累计实际产量 / 目标产量"
- 实时展示各计划、各区域的完成进度
- 支持按计划、区域、品种、时间维度查看完成率
- 完成率可视化展示（进度条、百分比等）
- 预警功能：完成率低于预期时自动提醒

---

### 5. 数据报表与分析模块

本模块通过多维度数据统计与可视化，为管理决策提供支持。

#### （1）数据表设计

**统计结果表（statistic_result）**
- 统计ID（主键）
- 统计指标名称（如：月度产量、完成率等）
- 统计维度（部门/区域/品种/时间等）
- 时间范围（开始日期、结束日期）
- 统计值
- 统计单位
- 计算时间
- 更新时间

#### （2）核心功能

**部门级报表**
- 展示本部门计划总数、已完成数、进行中数
- 月产量趋势图：展示月度产量变化趋势
- 品种占比分析：各品种产量占比饼图
- 区域产量对比：各区域产量柱状图
- 支持按区域或时间筛选
- 支持导出报表（Excel、PDF等格式）

**数据可视化**
- 产量趋势分析：折线图展示产量变化
- 计划完成情况：仪表盘展示完成率
- 区域分布图：地图或图表展示各区域数据
- 品种分析：各品种产量、占比等统计图表

---

### 6. 操作日志与追溯模块

本模块记录关键操作轨迹，确保数据可追溯、责任可明确。

#### （1）数据表设计

**操作日志表（sys_oper_log）**
- 日志ID（主键）
- 用户ID（外键关联用户表）
- 操作模块（用户管理/计划管理/产量统计等）
- 操作类型（新增/修改/删除/审核/登录等）
- 操作内容（详细描述）
- 操作时间
- IP地址
- 操作结果（成功/失败）
- 备注信息

#### （2）核心功能

**日志记录**
- 自动记录用户登录、计划修改、产量审核等操作
- 记录内容：操作人、时间、内容、IP地址
- 记录操作结果：成功或失败
- 关键操作强制记录，确保数据安全

**日志查询**
- 支持按用户、模块、时间筛选日志
- 支持按操作类型筛选
- 支持关键词搜索
- 日志详情查看
- 便于问题排查与责任追溯
- 支持日志导出

---

## （二）次要功能模块

### 1. 消息通知模块

及时推送关键信息，保障业务流程顺畅。

#### （1）数据表设计

**消息表（sys_message）**
- 消息ID（主键）
- 接收人ID（外键关联用户表）
- 发送人ID（外键关联用户表，可为系统）
- 消息标题
- 消息内容
- 消息类型（通知/提醒/公告）
- 关联业务类型（计划审批/产量审核/系统维护等）
- 关联业务ID
- 状态（未读/已读）
- 创建时间
- 阅读时间

#### （2）核心功能

**站内通知**
- 推送计划审批提醒：计划提交后通知审批人
- 产量审核待办：产量录入后通知审核人
- 系统维护公告：系统维护、升级等公告通知
- 审批结果通知：审批通过或驳回后通知申请人
- 计划调整提醒：计划调整申请通知审批人

**消息管理**
- 支持标记已读或未读
- 支持删除消息
- 显示未读消息数量（角标提示）
- 消息列表查看：支持按类型、状态筛选
- 消息详情查看
- 一键标记全部已读

---

## 技术架构说明

### 前端技术栈
- Vue 3
- JavaScript
- Vite

### 后端技术栈
- Spring Boot
- Java

### 数据库
- MySQL（建议）

---

## 开发规范

1. **命名规范**
   - 数据表：使用小写字母和下划线，如 `sys_user`
   - 字段名：使用小写字母和下划线，如 `user_id`
   - 代码：遵循驼峰命名规范

2. **权限控制**
   - 所有接口需要进行权限验证
   - 前端路由需要权限控制
   - 按钮级权限控制

3. **数据验证**
   - 前端表单验证
   - 后端接口参数验证
   - 数据完整性校验

4. **日志记录**
   - 关键操作必须记录日志
   - 异常情况记录错误日志

---
---

## 版本历史

- v1.0.0 - 初始版本，包含所有主要功能模块

---

*文档最后更新时间：2024年*

